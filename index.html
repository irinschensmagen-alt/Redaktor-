<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ã –í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫ - –†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä—ã | Deutsch interaktiv</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #6C5CE7;
            --accent: #FD79A8;
            --success: #00b894;
            --red: #ff7675;
            --blue: #74b9ff;
            --green: #55efc4;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* –ö–û–ù–¢–ï–ô–ù–ï–† */
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ - –†–ï–î–ê–ö–¢–û–† */
        .editor-panel {
            width: 45%;
            background: white;
            overflow-y: auto;
            box-shadow: 5px 0 30px rgba(0,0,0,0.3);
        }
        
        .editor-panel::-webkit-scrollbar { width: 10px; }
        .editor-panel::-webkit-scrollbar-track { background: #f0f0f0; }
        .editor-panel::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
        }
        
        /* HEADER */
        .header {
            background: linear-gradient(135deg, var(--primary), #5848c2);
            color: white;
            padding: 30px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
            letter-spacing: 2px;
        }
        
        /* –ö–û–ù–¢–ï–ù–¢ */
        .content {
            padding: 30px;
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }
        
        .section-title {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 6px solid var(--accent);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-size: 0.8rem;
            font-weight: 700;
            color: #495057;
            text-transform: uppercase;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }
        
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: 'Courier New', monospace;
        }
        
        input[type="color"] {
            height: 50px;
            cursor: pointer;
        }
        
        /* –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í */
        .upload-area {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .upload-btn {
            flex: 1;
            padding: 12px;
            border: 2px dashed var(--primary);
            border-radius: 10px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: 700;
            color: var(--primary);
            transition: all 0.3s;
        }
        
        .upload-btn:hover {
            background: rgba(108, 92, 231, 0.1);
            border-style: solid;
        }
        
        .upload-btn input {
            display: none;
        }
        
        .url-input {
            flex: 2;
        }
        
        .file-info {
            margin-top: 10px;
            padding: 10px;
            background: #e7f3ff;
            border-radius: 8px;
            font-size: 0.85rem;
            display: none;
        }
        
        .file-info.active {
            display: block;
        }
        
        /* –ü–ï–†–°–û–ù–ê–ñ–ò */
        .chars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .char-item {
            aspect-ratio: 1;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            background: white;
            transition: all 0.3s;
        }
        
        .char-item:hover {
            transform: scale(1.1);
            border-color: var(--primary);
        }
        
        .char-item.active {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fff0f5, #ffe6f0);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4);
        }
        
        /* –ö–ù–û–ü–ö–ò */
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
            border-top: 2px solid #f0f0f0;
        }
        
        .btn {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-weight: 900;
            font-size: 1.1rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #5848c2);
            color: white;
            box-shadow: 0 6px 0 #4834D4;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #4834D4;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #00a884);
            color: white;
            box-shadow: 0 6px 0 #00896c;
        }
        
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #00896c;
        }
        
        /* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ - –ü–†–ï–î–ü–†–û–°–ú–û–¢–† */
        .preview-panel {
            width: 55%;
            display: flex;
            flex-direction: column;
        }
        
        .preview-header {
            background: #2d3436;
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-header h2 {
            font-size: 1.4rem;
        }
        
        .preview-controls {
            display: flex;
            gap: 10px;
        }
        
        .preview-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .preview-btn:hover {
            background: white;
            color: #2d3436;
        }
        
        .preview-content {
            flex: 1;
            background: #f5f5f5;
            position: relative;
        }
        
        .preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #636e72;
            padding: 40px;
            text-align: center;
        }
        
        .preview-placeholder-icon {
            font-size: 6rem;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .preview-placeholder h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: #636e72;
            background: none;
            border: none;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            color: var(--red);
            transform: rotate(90deg);
        }
        
        .modal h3 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .code-box {
            background: #2d3436;
            color: #00b894;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 20px 0;
            position: relative;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .copy-btn {
            position: sticky;
            top: 10px;
            right: 10px;
            float: right;
            padding: 8px 15px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            z-index: 1;
        }
        
        .copy-btn:hover {
            background: #00a884;
        }
        
        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }
            
            .editor-panel, .preview-panel {
                width: 100%;
            }
            
            .preview-panel {
                min-height: 600px;
            }
        }
        
        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="editor-panel">
        <div class="header">
            <h1>ü¶ã –í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫</h1>
            <div class="subtitle">–†–ï–î–ê–ö–¢–û–† –ò–ì–†–´ | DEUTSCH INTERAKTIV</div>
        </div>
        
        <div class="content">
            <!-- –Ø–ó–´–ö -->
            <div class="section">
                <div class="section-title">üåç –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫</label>
                    <select id="gameLang">
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        <option value="de" selected>üá©üá™ Deutsch</option>
                        <option value="en">üá¨üáß English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                    </select>
                </div>
            </div>
            
            <!-- –§–û–ù -->
            <div class="section">
                <div class="section-title">üé® –§–æ–Ω –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>–ì–æ—Ç–æ–≤—ã–µ —Ñ–æ–Ω—ã</label>
                    <select id="bgTheme">
                        <option value="garden" selected>üåª –û–≥–æ—Ä–æ–¥</option>
                        <option value="meadow">üå∏ –õ—É–≥</option>
                        <option value="forest">üå≤ –õ–µ—Å</option>
                        <option value="space">üöÄ –ö–æ—Å–º–æ—Å</option>
                        <option value="ocean">üåä –û–∫–µ–∞–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –° –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
                            <input type="file" accept="image/*" onchange="handleUpload('bg', this)">
                        </label>
                        <input type="text" class="url-input" id="bgUrl" placeholder="üîó URL –∫–∞—Ä—Ç–∏–Ω–∫–∏">
                    </div>
                    <div class="file-info" id="bgInfo"></div>
                </div>
            </div>
            
            <!-- –ü–ï–†–°–û–ù–ê–ñ–ò -->
            <div class="section">
                <div class="section-title">üë§ –ì–ª–∞–≤–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ GIF</label>
                    <div class="chars-grid">
                        <div class="char-item active" onclick="selectChar('hero', 0, this)">ü¶ã</div>
                        <div class="char-item" onclick="selectChar('hero', 1, this)">üë®‚Äçüé®</div>
                        <div class="char-item" onclick="selectChar('hero', 2, this)">üë©‚Äçüé®</div>
                        <div class="char-item" onclick="selectChar('hero', 3, this)">üêù</div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleUpload('hero', this)">
                        </label>
                        <input type="text" class="url-input" id="heroUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="heroInfo"></div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">‚ö†Ô∏è –ü–µ—Ä—Å–æ–Ω–∞–∂ –ø—Ä–∏ –æ—à–∏–±–∫–µ</div>
                <div class="form-group">
                    <div class="chars-grid">
                        <div class="char-item active" onclick="selectChar('enemy', 0, this)">üò†üêù</div>
                        <div class="char-item" onclick="selectChar('enemy', 1, this)">‚ö°</div>
                        <div class="char-item" onclick="selectChar('enemy', 2, this)">üåßÔ∏è</div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleUpload('enemy', this)">
                        </label>
                        <input type="text" class="url-input" id="enemyUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="enemyInfo"></div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üéÅ –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Å–ø–µ—Ö</div>
                <div class="form-group">
                    <div class="chars-grid">
                        <div class="char-item active" onclick="selectChar('reward', 0, this)">üåπ</div>
                        <div class="char-item" onclick="selectChar('reward', 1, this)">üèÜ</div>
                        <div class="char-item" onclick="selectChar('reward', 2, this)">‚≠ê</div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleUpload('reward', this)">
                        </label>
                        <input type="text" class="url-input" id="rewardUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="rewardInfo"></div>
                </div>
            </div>
            
            <!-- –ó–í–£–ö–ò -->
            <div class="section">
                <div class="section-title">üîä –ó–≤—É–∫–∏</div>
                <div class="form-group">
                    <label>–ó–≤—É–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleUpload('soundSuccess', this)">
                        </label>
                        <input type="text" class="url-input" id="soundSuccessUrl" placeholder="üîó URL –∑–≤—É–∫–∞ (.mp3)">
                    </div>
                    <div class="file-info" id="soundSuccessInfo"></div>
                </div>
                <div class="form-group">
                    <label>–ó–≤—É–∫ –æ—à–∏–±–∫–∏</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleUpload('soundError', this)">
                        </label>
                        <input type="text" class="url-input" id="soundErrorUrl" placeholder="üîó URL –∑–≤—É–∫–∞">
                    </div>
                    <div class="file-info" id="soundErrorInfo"></div>
                </div>
                <div class="form-group">
                    <label>–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleUpload('musicBg', this)">
                        </label>
                        <input type="text" class="url-input" id="musicBgUrl" placeholder="üîó URL –º—É–∑—ã–∫–∏">
                    </div>
                    <div class="file-info" id="musicBgInfo"></div>
                </div>
            </div>
            
            <!-- –°–õ–û–í–ê -->
            <div class="section">
                <div class="section-title">üìö –°–ª–æ–≤–∞ –¥–ª—è –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>Der (—Å–∏–Ω–∏–π) - –º—É–∂—Å–∫–æ–π —Ä–æ–¥</label>
                    <textarea id="wordsDer" placeholder="Hund, Fisch, Vogel, Hamster, Igel, Hai, Affe">Hund, Fisch, Vogel, Hamster, Igel</textarea>
                </div>
                <div class="form-group">
                    <label>Die (–∫—Ä–∞—Å–Ω—ã–π) - –∂–µ–Ω—Å–∫–∏–π —Ä–æ–¥</label>
                    <textarea id="wordsDie" placeholder="Katze, Maus, Spinne, Gans, Fliege, Kuh, Ziege">Katze, Maus, Spinne, Gans, Fliege</textarea>
                </div>
                <div class="form-group">
                    <label>Das (–∑–µ–ª—ë–Ω—ã–π) - —Å—Ä–µ–¥–Ω–∏–π —Ä–æ–¥</label>
                    <textarea id="wordsDas" placeholder="Schwein, Reh, Pferd, Huhn, Schaf, Kaninchen">Schwein, Reh, Pferd, Huhn, Schaf</textarea>
                </div>
            </div>
            
            <!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
            <div class="section">
                <div class="section-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                <div class="form-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</label>
                    <select id="gameLevel">
                        <option value="easy" selected>ü¶ã –õ—ë–≥–∫–∏–π (–ë–∞–±–æ—á–∫–∞)</option>
                        <option value="medium">üå∫ –°—Ä–µ–¥–Ω–∏–π (–ì–µ–æ—Ä–≥–∏–Ω–∞)</option>
                        <option value="hard">üè† –°–ª–æ–∂–Ω—ã–π (–î–æ–º)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ (—Å–µ–∫—É–Ω–¥—ã)</label>
                    <input type="number" id="timer" value="20" min="5" max="60">
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –ø–æ–±–µ–¥—ã</label>
                    <input type="text" id="winText" value="Wir gratulieren! Gute Arbeit!">
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ</label>
                    <input type="text" id="errorText" value="Versuch noch einmal!">
                </div>
            </div>
            
            <!-- –ö–ù–û–ü–ö–ò -->
            <div class="actions">
                <button class="btn btn-primary" onclick="updatePreview()">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                <button class="btn btn-success" onclick="generateCode()">üìã –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
            </div>
        </div>
    </div>
    
    <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="preview-panel">
        <div class="preview-header">
            <h2>üéÆ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä—ã</h2>
            <div class="preview-controls">
                <button class="preview-btn" onclick="updatePreview()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
        <div class="preview-content" id="previewArea">
            <div class="preview-placeholder">
                <div class="preview-placeholder-icon">üé®</div>
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä—ã</h3>
                <p>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à—É –∏–≥—Ä—É</p>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -->
<div class="modal" id="codeModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">√ó</button>
        <h3>üìã –ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially</h3>
        <p style="margin-bottom: 20px; color: #636e72;">
            –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially —á–µ—Ä–µ–∑ "–í—Å—Ç–∞–≤–∫–∞" ‚Üí "HTML/Embed":
        </p>
        <div class="code-box">
            <button class="copy-btn" onclick="copyCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <pre id="iframeCode"></pre>
        </div>
        <p style="margin-top: 20px; color: #636e72; font-size: 0.9rem;">
            ‚úÖ –≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–≥—Ä—É –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ<br>
            ‚úÖ –í—Å–µ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –∑–≤—É–∫–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã<br>
            ‚úÖ –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –≤ Genially, Google Slides, —Å–∞–π—Ç—ã
        </p>
    </div>
</div>

<script>
// –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
const config = {
    lang: 'de',
    bg: { type: 'garden', data: '' },
    hero: { type: 'emoji', value: 'ü¶ã', data: '' },
    enemy: { type: 'emoji', value: 'üò†üêù', data: '' },
    reward: { type: 'emoji', value: 'üåπ', data: '' },
    sounds: {
        success: '',
        error: '',
        bgMusic: ''
    },
    words: {
        der: 'Hund, Fisch, Vogel, Hamster, Igel',
        die: 'Katze, Maus, Spinne, Gans, Fliege',
        das: 'Schwein, Reh, Pferd, Huhn, Schaf'
    },
    settings: {
        level: 'easy',
        timer: 20,
        winText: 'Wir gratulieren! Gute Arbeit!',
        errorText: 'Versuch noch einmal!'
    }
};

// –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–ê
function handleUpload(type, input) {
    const file = input.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const data = e.target.result;
        const info = document.getElementById(type + 'Info');
        
        if (info) {
            info.textContent = '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: ' + file.name;
            info.classList.add('active');
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥
        if (type === 'bg') {
            config.bg.data = data;
        } else if (['hero', 'enemy', 'reward'].includes(type)) {
            config[type].type = 'custom';
            config[type].data = data;
        } else if (type.startsWith('sound') || type === 'musicBg') {
            const key = type.replace('sound', '').replace('Success', 'success').replace('Error', 'error').replace('musicBg', 'bgMusic');
            config.sounds[key] = data;
        }
    };
    reader.readAsDataURL(file);
}

// –í–´–ë–û–† –ü–ï–†–°–û–ù–ê–ñ–ê
function selectChar(type, index, element) {
    const grid = element.parentElement;
    grid.querySelectorAll('.char-item').forEach(item => {
        item.classList.remove('active');
    });
    element.classList.add('active');
    
    config[type].type = 'emoji';
    config[type].value = element.textContent;
}

// –°–ë–û–† –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
function collectConfig() {
    config.lang = document.getElementById('gameLang').value;
    config.bg.type = document.getElementById('bgTheme').value;
    config.words.der = document.getElementById('wordsDer').value;
    config.words.die = document.getElementById('wordsDie').value;
    config.words.das = document.getElementById('wordsDas').value;
    config.settings.level = document.getElementById('gameLevel').value;
    config.settings.timer = parseInt(document.getElementById('timer').value);
    config.settings.winText = document.getElementById('winText').value;
    config.settings.errorText = document.getElementById('errorText').value;
    
    // URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∑–≤—É–∫–æ–≤
    const bgUrl = document.getElementById('bgUrl').value;
    if (bgUrl) config.bg.data = bgUrl;
    
    const heroUrl = document.getElementById('heroUrl').value;
    if (heroUrl) { config.hero.type = 'url'; config.hero.data = heroUrl; }
    
    const enemyUrl = document.getElementById('enemyUrl').value;
    if (enemyUrl) { config.enemy.type = 'url'; config.enemy.data = enemyUrl; }
    
    const rewardUrl = document.getElementById('rewardUrl').value;
    if (rewardUrl) { config.reward.type = 'url'; config.reward.data = rewardUrl; }
    
    const soundSuccessUrl = document.getElementById('soundSuccessUrl').value;
    if (soundSuccessUrl) config.sounds.success = soundSuccessUrl;
    
    const soundErrorUrl = document.getElementById('soundErrorUrl').value;
    if (soundErrorUrl) config.sounds.error = soundErrorUrl;
    
    const musicBgUrl = document.getElementById('musicBgUrl').value;
    if (musicBgUrl) config.sounds.bgMusic = musicBgUrl;
}

// –ì–ï–ù–ï–†–ê–¶–ò–Ø –ò–ì–†–´
function generateGameHTML() {
    collectConfig();
    
    const bgStyles = {
        garden: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
        meadow: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
        forest: 'linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%)',
        space: 'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)',
        ocean: 'linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)'
    };
    
    const bgStyle = config.bg.data ? `background-image: url('${config.bg.data}');` : `background: ${bgStyles[config.bg.type] || bgStyles.garden};`;
    
    const wordsData = {
        der: config.words.der.split(',').map(w => w.trim()).filter(w => w),
        die: config.words.die.split(',').map(w => w.trim()).filter(w => w),
        das: config.words.das.split(',').map(w => w.trim()).filter(w => w)
    };
    
    return `<!DOCTYPE html>
<html lang="${config.lang}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', Arial, sans-serif;
            ${bgStyle}
            background-size: cover;
            background-attachment: fixed;
            overflow: hidden;
        }
        .game-screen {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .top-bar {
            height: 80px;
            background: rgba(255,255,255,0.95);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        .progress-container {
            flex: 1;
            max-width: 400px;
            height: 50px;
            background: #f0f0f0;
            border-radius: 25px;
            border: 3px solid #6C5CE7;
            overflow: hidden;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #6C5CE7, #FD79A8);
            width: 0%;
            transition: width 0.5s ease;
        }
        .water-drops {
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            display: flex;
            gap: 5px;
            z-index: 1;
        }
        .water-drop {
            font-size: 1.5rem;
            animation: dropIn 0.5s ease;
        }
        @keyframes dropIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #6C5CE7;
            min-width: 100px;
            text-align: center;
        }
        .timer.warning { color: #e74c3c; animation: pulse 0.5s infinite; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .game-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .butterfly-container {
            width: 400px;
            height: 400px;
            position: relative;
        }
        .butterfly {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .butterfly.animated {
            animation: fly 4s ease-in-out infinite;
        }
        @keyframes fly {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(30px, -30px); }
            50% { transform: translate(0, -60px); }
            75% { transform: translate(-30px, -30px); }
        }
        .wing {
            position: absolute;
            width: 150px;
            height: 200px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            border: 5px solid #2d3436;
            background: #e0e0e0;
            display: flex;
            flex-wrap: wrap;
        }
        .wing-left { left: 50px; top: 100px; transform: rotate(-15deg); }
        .wing-right { right: 50px; top: 100px; transform: rotate(15deg); }
        .wing-segment {
            flex: 1 1 33%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
            text-align: center;
            padding: 3px;
            transition: all 0.5s ease;
        }
        .wing-segment.colored {
            box-shadow: inset 0 0 20px rgba(255,255,255,0.5), 0 0 15px currentColor;
        }
        .butterfly-body {
            position: absolute;
            width: 50px;
            height: 180px;
            background: linear-gradient(180deg, #2d3436, #636e72);
            border-radius: 25px;
            left: 50%;
            top: 130px;
            transform: translateX(-50%);
        }
        .butterfly-head {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #2d3436;
            border-radius: 50%;
            left: 50%;
            top: 110px;
            transform: translateX(-50%);
        }
        .antenna {
            position: absolute;
            width: 2px;
            height: 30px;
            background: #2d3436;
            top: -25px;
        }
        .antenna-left { left: 15px; transform: rotate(-30deg); }
        .antenna-right { right: 15px; transform: rotate(30deg); }
        .antenna::after {
            content: '‚≠ï';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1rem;
        }
        .rose-container {
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 200px;
        }
        .rose {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        .rose.animated {
            animation: roseGlow 2s ease-in-out infinite;
        }
        @keyframes roseGlow {
            0%, 100% { filter: drop-shadow(0 0 10px #ff7675); }
            50% { filter: drop-shadow(0 0 20px #e74c3c); }
        }
        .rose-center {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ffd93d;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
        }
        .petal {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #2d3436;
            border-radius: 50%;
            transition: all 0.5s ease;
        }
        .petal.colored {
            background: #e74c3c;
            box-shadow: 0 0 20px #e74c3c;
        }
        .petal:nth-child(1) { top: -25px; left: 30px; }
        .petal:nth-child(2) { top: 10px; left: 70px; }
        .petal:nth-child(3) { top: 50px; left: 70px; }
        .petal:nth-child(4) { top: 70px; left: 30px; }
        .petal:nth-child(5) { top: 70px; left: -10px; }
        .petal:nth-child(6) { top: 50px; left: -25px; }
        .petal:nth-child(7) { top: 10px; left: -25px; }
        .stem {
            position: absolute;
            width: 8px;
            height: 100px;
            background: #2d3436;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.5s;
        }
        .stem.green { background: linear-gradient(180deg, #27ae60, #229954); }
        .character {
            position: absolute;
            font-size: 4rem;
            z-index: 50;
        }
        .painter {
            bottom: 150px;
            left: 100px;
            animation: walk 4s ease-in-out infinite;
        }
        @keyframes walk {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(50px); }
        }
        .bee {
            top: 120px;
            right: 100px;
            display: none;
            animation: chase 2s ease-in-out;
        }
        .bee.active { display: block; }
        @keyframes chase {
            0% { transform: translate(0, 0); }
            50% { transform: translate(-150px, 50px); }
            100% { transform: translate(0, 0); }
        }
        .words-panel {
            position: absolute;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 20px;
            max-width: 250px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .words-panel h3 {
            margin-bottom: 15px;
            color: #6C5CE7;
        }
        .word-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s;
        }
        .word-item:hover {
            transform: scale(1.05);
            border-color: #6C5CE7;
        }
        .word-item.correct {
            background: #d4edda;
            border-color: #28a745;
            animation: correct 0.5s ease;
        }
        @keyframes correct {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        .word-item.wrong {
            animation: wrong 0.5s ease;
        }
        @keyframes wrong {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .bottom-panel {
            height: 120px;
            background: rgba(255,255,255,0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 50px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
        }
        .watering-can {
            width: 100px;
            height: 100px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        .watering-can:hover {
            transform: scale(1.1);
        }
        .can-body {
            width: 80px;
            height: 60px;
            border-radius: 15px;
            border: 4px solid #2d3436;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        .can-red { background: linear-gradient(135deg, #ff7675, #e74c3c); }
        .can-blue { background: linear-gradient(135deg, #74b9ff, #3498db); }
        .can-green { background: linear-gradient(135deg, #55efc4, #00b894); }
        .can-spout {
            width: 30px;
            height: 10px;
            background: #2d3436;
            border-radius: 0 8px 8px 0;
            position: absolute;
            right: -5px;
            top: 25px;
        }
        .can-handle {
            width: 40px;
            height: 50px;
            border: 4px solid #2d3436;
            border-radius: 50%;
            border-left: none;
            position: absolute;
            left: -15px;
            top: 5px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
        }
        .modal-icon { font-size: 6rem; margin-bottom: 20px; }
        .modal-title { font-size: 2.5rem; color: #6C5CE7; margin-bottom: 15px; }
        .modal-text { font-size: 1.3rem; color: #636e72; margin-bottom: 25px; }
        .modal-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #6C5CE7, #5848c2);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="game-screen">
    <div class="top-bar">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="water-drops" id="waterDrops"></div>
        </div>
        <div class="timer" id="timer">${config.settings.timer}</div>
    </div>
    
    <div class="game-area">
        <div class="butterfly-container">
            <div class="butterfly" id="butterfly">
                <div class="butterfly-head">
                    <div class="antenna antenna-left"></div>
                    <div class="antenna antenna-right"></div>
                </div>
                <div class="butterfly-body"></div>
                <div class="wing wing-left" id="wingLeft"></div>
                <div class="wing wing-right" id="wingRight"></div>
            </div>
            <div class="rose-container">
                <div class="rose" id="rose">
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="rose-center"></div>
                </div>
                <div class="stem" id="stem"></div>
            </div>
        </div>
        
        <div class="character painter">${config.hero.value}</div>
        <div class="character bee" id="bee">${config.enemy.value}</div>
        
        <div class="words-panel">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–≤–æ:</h3>
            <div id="wordsList"></div>
        </div>
    </div>
    
    <div class="bottom-panel">
        <div class="watering-can">
            <div class="can-body can-red">die</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
        <div class="watering-can">
            <div class="can-body can-blue">der</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
        <div class="watering-can">
            <div class="can-body can-green">das</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
    </div>
</div>

<div class="modal" id="winModal">
    <div class="modal-content">
        <div class="modal-icon">${config.reward.value}</div>
        <div class="modal-title">${config.settings.winText}</div>
        <div class="modal-text">–ë–∞–±–æ—á–∫–∞ –æ–∂–∏–≤–∞–µ—Ç!</div>
        <button class="modal-btn" onclick="location.reload()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>
</div>

<script>
const wordsData = ${JSON.stringify(wordsData)};
const colors = { die: '#ff7675', der: '#74b9ff', das: '#55efc4' };
let currentArticle = null;
let correctCount = 0;
let timer = ${config.settings.timer};
let timerInterval = null;
let petalIndex = 0;

function init() {
    for(let i=0; i<6; i++) {
        document.getElementById('wingLeft').innerHTML += '<div class="wing-segment"></div>';
        document.getElementById('wingRight').innerHTML += '<div class="wing-segment"></div>';
    }
    startRound();
}

function startRound() {
    const articles = ['die', 'der', 'das'];
    currentArticle = articles[Math.floor(Math.random() * articles.length)];
    highlightCan(currentArticle);
    generateWords();
    startTimer();
}

function highlightCan(article) {
    document.querySelectorAll('.watering-can').forEach(can => can.style.boxShadow = '');
    const index = article === 'die' ? 0 : article === 'der' ? 1 : 2;
    document.querySelectorAll('.watering-can')[index].style.boxShadow = '0 0 30px ' + colors[article];
}

function generateWords() {
    const list = document.getElementById('wordsList');
    list.innerHTML = '';
    const correct = [...wordsData[currentArticle]].sort(() => Math.random() - 0.5).slice(0, 2);
    const others = Object.keys(wordsData).filter(a => a !== currentArticle);
    const wrong = wordsData[others[Math.floor(Math.random() * others.length)]][0];
    const words = [...correct, wrong].sort(() => Math.random() - 0.5);
    
    words.forEach(word => {
        const div = document.createElement('div');
        div.className = 'word-item';
        div.textContent = word;
        div.onclick = () => checkWord(word, div);
        list.appendChild(div);
    });
}

function checkWord(word, el) {
    clearInterval(timerInterval);
    const isCorrect = wordsData[currentArticle].includes(word);
    
    if (isCorrect) {
        el.classList.add('correct');
        const segments = document.querySelectorAll('.wing-segment');
        const empty = Array.from(segments).find(s => !s.classList.contains('colored'));
        if (empty) {
            empty.textContent = word;
            empty.style.backgroundColor = colors[currentArticle];
            empty.classList.add('colored');
        }
        const petals = document.querySelectorAll('.petal');
        if (petalIndex < petals.length) {
            petals[petalIndex].classList.add('colored');
            petalIndex++;
            if (petalIndex >= petals.length) {
                document.getElementById('stem').classList.add('green');
                document.getElementById('rose').classList.add('animated');
            }
        }
        const drops = document.getElementById('waterDrops');
        const drop = document.createElement('span');
        drop.className = 'water-drop';
        drop.textContent = 'üíß';
        drops.appendChild(drop);
        document.getElementById('progressBar').style.width = ((++correctCount) / 12 * 100) + '%';
        
        setTimeout(() => {
            if (correctCount >= 12) {
                document.getElementById('butterfly').classList.add('animated');
                setTimeout(() => {
                    document.getElementById('winModal').classList.add('active');
                }, 2000);
            } else {
                startRound();
            }
        }, 1500);
    } else {
        el.classList.add('wrong');
        const bee = document.getElementById('bee');
        bee.classList.add('active');
        setTimeout(() => {
            bee.classList.remove('active');
            startRound();
        }, 2000);
    }
}

function startTimer() {
    timer = ${config.settings.timer};
    document.getElementById('timer').textContent = timer;
    document.getElementById('timer').classList.remove('warning');
    timerInterval = setInterval(() => {
        timer--;
        document.getElementById('timer').textContent = timer;
        if (timer <= 5) document.getElementById('timer').classList.add('warning');
        if (timer <= 0) {
            clearInterval(timerInterval);
            document.getElementById('bee').classList.add('active');
            setTimeout(() => {
                document.getElementById('bee').classList.remove('active');
                startRound();
            }, 2000);
        }
    }, 1000);
}

init();
</script>
</body>
</html>`;
}

// –ü–†–ï–î–ü–†–û–°–ú–û–¢–†
function updatePreview() {
    const html = generateGameHTML();
    const preview = document.getElementById('previewArea');
    preview.innerHTML = '<iframe class="preview-iframe" srcdoc="' + html.replace(/"/g, '&quot;') + '"></iframe>';
}

// –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–û–î–ê
function generateCode() {
    const html = generateGameHTML();
    const code = '<iframe width="800" height="600" style="border:none; border-radius:20px;" srcdoc="' + html.replace(/"/g, '&quot;') + '"></iframe>';
    document.getElementById('iframeCode').textContent = code;
    document.getElementById('codeModal').classList.add('active');
}

// –ö–û–ü–ò–†–û–í–ê–ù–ò–ï
function copyCode() {
    const code = document.getElementById('iframeCode').textContent;
    navigator.clipboard.writeText(code).then(() => {
        alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially —á–µ—Ä–µ–∑ "–í—Å—Ç–∞–≤–∫–∞" ‚Üí "HTML"');
    });
}

// –ó–ê–ö–†–´–¢–¨ –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û
function closeModal() {
    document.getElementById('codeModal').classList.remove('active');
}
</script>

</body>
</html>
