<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Deutsch interaktiv | Editor v5.0</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; color: #333; }
        .editor-container { max-width: 800px; margin: 0 auto; background: white; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: #6C5CE7; color: white; padding: 20px; display: flex; align-items: center; gap: 15px; }
        .logo { background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6C5CE7; font-weight: 900; }
        .content { padding: 25px; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        .full-row { grid-column: span 3; }
        label { display: block; font-weight: bold; font-size: 12px; color: #6C5CE7; margin-bottom: 5px; text-transform: uppercase; }
        input, textarea, select { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 10px; box-sizing: border-box; font-family: inherit; }
        textarea { height: 100px; resize: none; border-bottom: 3px solid #FD79A8; }
        .btn-main { background: #FD79A8; color: white; border: none; width: calc(100% - 50px); margin: 20px 25px 25px; padding: 18px; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-main:hover { background: #e84393; transform: translateY(-2px); }
        #modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; align-items:center; justify-content:center; }
        .modal-body { background: white; padding: 30px; border-radius: 20px; width: 80%; max-width: 600px; text-align: center; }
        #code-output { background: #2d3436; color: #00ff00; padding: 15px; border-radius: 10px; font-family: monospace; font-size: 11px; height: 150px; overflow: auto; text-align: left; margin: 15px 0; word-break: break-all; }
    </style>
</head>
<body>

<div class="editor-container">
    <div class="header">
        <div class="logo">DI</div>
        <h2 style="margin:0">Deutsch interaktiv: –†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä</h2>
    </div>
    
    <div class="content">
        <div class="full-row">
            <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ [cite: 115]</label>
            <select id="ui_lang">
                <option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="de">Deutsch</option><option value="en">English</option>
                <option value="es">Espa√±ol</option><option value="it">Italiano</option><option value="zh">‰∏≠Êñá</option>
            </select>
        </div>

        <div>
            <label style="color:blue">DER (–°–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) </label>
            <textarea id="words_der">Hund, Fisch, Hamster, Vogel, Elefant</textarea>
        </div>
        <div>
            <label style="color:red">DIE (–°–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) </label>
            <textarea id="words_die">Katze, Maus, Kuh, Biene, Gans</textarea>
        </div>
        <div>
            <label style="color:green">DAS (–°–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) </label>
            <textarea id="words_das">Pferd, Reh, Schwein, Huhn, Schaf</textarea>
        </div>

        <div class="full-row">
            <label>–§–æ–Ω–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ (URL) [cite: 1, 132]</label>
            <input type="text" id="bg_url" value="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Background_Garden.jpg">
        </div>
    </div>

    <button class="btn-main" onclick="buildGame()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ò–ì–†–£ –î–õ–Ø GENIALLY</button>
</div>

<div id="modal">
    <div class="modal-body">
        <h3 style="margin-top:0; color:#6C5CE7">–ö–æ–¥ –≥–æ—Ç–æ–≤!</h3>
        <p style="font-size:13px; color:#666">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ Genially (–í—Å—Ç–∞–≤–∫–∞ -> –î—Ä—É–≥–æ–µ)</p>
        <div id="code-output"></div>
        <button class="btn-main" style="margin:0" onclick="copyToClipboard()">–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î</button>
        <p onclick="document.getElementById('modal').style.display='none'" style="cursor:pointer; font-size:12px; color:gray; margin-top:15px; text-decoration:underline">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–∞–≤–∫–∞–º</p>
    </div>
</div>

<script>
    function buildGame() {
        const bg = document.getElementById('bg_url').value;
        const der = document.getElementById('words_der').value;
        const die = document.getElementById('words_die').value;
        const das = document.getElementById('words_das').value;

        // –ö–æ–¥ —Å–∞–º–æ–π –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥–µ—Ç –≤ iframe
        const gameCode = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { margin:0; overflow:hidden; font-family:sans-serif; background:url('${bg}') center/cover; height:100vh; text-align:center; }
        #w { display:inline-block; margin-top:50px; background:white; padding:15px 40px; border-radius:20px; font-size:32px; font-weight:900; border:4px solid #6C5CE7; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
        #rose { display:block; margin:40px auto; width:300px; filter:grayscale(1); transition:1s; }
        #bee { position:absolute; top:-200px; right:50px; width:120px; transition:0.8s; }
        .cans { position:absolute; bottom:40px; width:100%; display:flex; justify-content:center; gap:25px; }
        .can { width:90px; cursor:pointer; filter:drop-shadow(0 5px 10px rgba(0,0,0,0.3)); }
    </style>
</head>
<body>
    <div id="w">...</div>
    <img id="rose" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Rose_Path.png">
    <img id="bee" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%97%D0%BB%D0%B0%D1%8F%20%D0%BF%D1%87%D0%B5%D0%BB%D0%B0.png">
    <div class="cans">
        <img class="can" src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="filter:hue-rotate(180deg)" onclick="ck('der')">
        <img class="can" src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="filter:hue-rotate(300deg)" onclick="ck('die')">
        <img class="can" src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="filter:hue-rotate(100deg)" onclick="ck('das')">
    </div>
    <script>
        const d = { 
            der: [${der.split(',').map(s=>"'"+s.trim()+"'").join(',')}], 
            die: [${die.split(',').map(s=>"'"+s.trim()+"'").join(',')}], 
            das: [${das.split(',').map(s=>"'"+s.trim()+"'").join(',')] 
        };
        let cur = '', sc = 0;
        function n() { 
            const k = Object.keys(d); 
            cur = k[Math.floor(Math.random()*k.length)]; 
            document.getElementById('w').innerText = d[cur][Math.floor(Math.random()*d[cur].length)]; 
        }
        window.ck = function(v) {
            if(v === cur) {
                sc++; 
                document.getElementById('rose').style.filter = "grayscale(" + (1 - sc/10) + ")";
                if(sc >= 10) { alert('Sensationell! üé®'); location.reload(); } else n();
            } else {
                document.getElementById('bee').style.top = "50px";
                setTimeout(() => { document.getElementById('bee').style.top = "-200px"; }, 1500);
            }
        };
        n();
    <\/script>
</body>
</html>`.trim();

        // –°–±–æ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Ñ—Ä–µ–π–º–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
        const finalIframe = '<iframe srcdoc="' + gameCode.replace(/"/g, '&quot;') + '" width="100%" height="600" frameborder="0"></iframe>';
        
        document.getElementById('code-output').innerText = finalIframe;
        document.getElementById('modal').style.display = 'flex';
    }

    function copyToClipboard() {
        const text = document.getElementById('code-output').innerText;
        navigator.clipboard.writeText(text).then(() => alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!"));
    }
</script>

</body>
</html>
